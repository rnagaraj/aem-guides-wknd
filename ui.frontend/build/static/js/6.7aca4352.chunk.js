(this.webpackJsonpwknd=this.webpackJsonpwknd||[]).push([[6],{360:function(t,e,s){"undefined"!=typeof self&&self,t.exports=function(t){var e={};function s(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=t,s.c=e,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(a,i,function(e){return t[e]}.bind(null,i));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=18)}({0:function(t,e){t.exports=s(0)},1:function(t,e){t.exports=s(4)},18:function(t,e,s){t.exports=s(9)},2:function(t,e,s){"use strict";s.d(e,"b",(function(){return n})),s.d(e,"a",(function(){return o}));var a=s(0);const i=(()=>{try{return"undefined"!=typeof window}catch(t){return!1}})(),n=(t,e)=>s=>{const i=s.baseCssClass,n=i&&i.trim().length>0?i:e,o={...s,baseCssClass:n};return a.createElement(t,Object.assign({},o))},o=t=>class extends a.Component{constructor(t){super(t),this.state={},i&&window.Granite&&window.Granite.author&&window.Granite.author.MessageChannel&&(this.messageChannel=new window.Granite.author.MessageChannel("cqauthor",window),this.callback=this.callback.bind(this))}callback(t){if(t.data&&t.data.id===this.props.cqPath&&"navigate"===t.data.operation){const e=t.data.index;this.setState({activeIndexFromAuthorPanel:e})}}componentDidMount(){this.messageChannel&&this.messageChannel.subscribeRequestMessage("cmp.panelcontainer",this.callback)}componentWillUnmount(){this.messageChannel&&this.messageChannel.unsubscribeRequestMessage("cmp.panelcontainer",this.callback)}render(){return a.createElement(t,Object.assign({},this.props,{activeIndexFromAuthorPanel:this.state.activeIndexFromAuthorPanel}))}}},5:function(t,e,s){"use strict";function a(t){return null==t.cqItemsOrder||0===t.cqItemsOrder.length}s.d(e,"a",(function(){return a}))},9:function(t,e,s){"use strict";s.r(e);var a=s(0),i=s.n(a),n=s(2),o=s(1),r=s(5);const l=(t,e)=>{let s=t;for(let a=0;a<e.length;a++){const t="{"+a+"}";s=s.replace(t,e[a])}return s};class c extends o.Container{constructor(t){super(t),this.interval=0,this.clearAutoPlay=()=>{window.clearInterval(this.interval)},this.state={activeIndex:0,isMouseEntered:!1,autoPlay:this.props.autoplay&&!this.props.isInEditor,componentMapping:this.props.componentMapping||o.ComponentMapping},this.handleIndicatorClick=this.handleIndicatorClick.bind(this),this.handleOnButtonPrev=this.handleOnButtonPrev.bind(this),this.handleOnButtonNext=this.handleOnButtonNext.bind(this),this.handleOnMouseEnter=this.handleOnMouseEnter.bind(this),this.handleOnMouseLeave=this.handleOnMouseLeave.bind(this)}componentDidUpdate(t,e,s){void 0!==this.props.activeIndexFromAuthorPanel&&t.activeIndexFromAuthorPanel!=this.props.activeIndexFromAuthorPanel&&(this.setState({activeIndex:this.props.activeIndexFromAuthorPanel}),this.toggleAutoPlay(!1))}componentDidMount(){this.autoPlay()}componentWillUnmount(){this.interval&&this.clearAutoPlay()}handleOnMouseEnter(){!this.props.autopauseDisabled&&this.props.autoplay&&this.clearAutoPlay()}handleOnMouseLeave(){!this.props.autopauseDisabled&&this.props.autoplay&&this.autoPlay()}handleOnButtonPrev(){this.prevSlide()}handleOnButtonNext(){this.nextSlide()}handleIndicatorClick(t){this.state.activeIndex!==t&&this.setState({activeIndex:t})}autoPlay(){this.interval=window.setInterval((()=>{this.autoPlayTick()}),this.props.delay)}autoPlayTick(){!this.state.autoPlay||this.props.cqItemsOrder.length<=1||this.nextSlide()}toggleAutoPlay(t){this.setState({autoPlay:t})}nextSlide(){const t=this.__getActiveIndex();t===this.props.cqItemsOrder.length-1?this.__setSlide(0):this.__setSlide(t+1)}prevSlide(){const t=this.__getActiveIndex();0===t?this.__setSlide(this.props.cqItemsOrder.length-1):this.__setSlide(t-1)}__getActiveIndex(){return this.state.activeIndex}__setSlide(t){this.setState({activeIndex:t})}render(){const t=Object(r.a)(this.props);return i.a.createElement("div",{className:this.props.baseCssClass,role:"group","data-panelcontainer":"carousel","aria-label":this.props.accessibilityLabel,"aria-roledescription":"carousel"},!t&&this.renderCarousel(),this.placeholderComponent)}displayItem(t,e){const s=e===this.state.activeIndex,a=!(!s&&!this.props.isInEditor),n=s?"".concat(this.props.baseCssClass,"__item ").concat(this.props.baseCssClass,"__item--active"):this.props.baseCssClass+"__item",o=l(this.props.accessibility.slide,[(e+1).toString(),this.props.cqItemsOrder.length.toString()]);return i.a.createElement("div",{key:"item-"+e,className:n,role:"tabpanel","aria-label":o,"data-cmp-hook-carousel":"item"},a&&t)}renderCarousel(){return i.a.createElement("div",{className:this.props.baseCssClass+"__content",onMouseEnter:()=>this.handleOnMouseEnter(),onMouseLeave:()=>this.handleOnMouseLeave()},this.childComponents.map(((t,e)=>this.displayItem(t,e))),this.renderCarouselActions(),this.renderCarouselIndicators())}renderCarouselIndicators(){return i.a.createElement("ol",{className:this.props.baseCssClass+"__indicators",role:"tablist","aria-label":this.props.accessibility.indicators},this.props.cqItemsOrder.map(((t,e)=>{const s=this.props.cqItems[t],a=e===this.state.activeIndex?"".concat(this.props.baseCssClass,"__indicator ").concat(this.props.baseCssClass,"__indicator--active"):this.props.baseCssClass+"__indicator",n=l(this.props.accessibility.indicator,[(e+1).toString()]);return i.a.createElement("li",{key:"item-"+e,onClick:()=>this.handleIndicatorClick(e),className:a,role:"tab","aria-label":n},s["cq:panelTitle"])})))}renderCarouselActions(){return i.a.createElement("div",{className:this.props.baseCssClass+"__actions"},i.a.createElement("button",{onClick:()=>this.handleOnButtonPrev(),className:"".concat(this.props.baseCssClass,"__action ").concat(this.props.baseCssClass,"__action--previous"),type:"button","aria-label":this.props.accessibility.previous},i.a.createElement("span",{className:this.props.baseCssClass+"__action-icon"}),i.a.createElement("span",{className:this.props.baseCssClass+"__action-text"},this.props.accessibility.previous)),i.a.createElement("button",{onClick:()=>this.handleOnButtonNext(),className:"".concat(this.props.baseCssClass,"__action ").concat(this.props.baseCssClass,"__action--next"),type:"button","aria-label":this.props.accessibility.next},i.a.createElement("span",{className:this.props.baseCssClass+"__action-icon"}),i.a.createElement("span",{className:this.props.baseCssClass+"__action-text"},this.props.accessibility.next)),this.props.autoplay&&i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{className:"".concat(this.props.baseCssClass,"__action ").concat(this.props.baseCssClass,"__action--pause ")+(this.state.autoPlay?"":this.props.baseCssClass+"__action--disabled"),type:"button","aria-label":this.props.accessibility.pause,onClick:()=>this.toggleAutoPlay(!1)},i.a.createElement("span",{className:this.props.baseCssClass+"__action-icon"}),i.a.createElement("span",{className:this.props.baseCssClass+"__action-text"},this.props.accessibility.pause)),i.a.createElement("button",{className:"".concat(this.props.baseCssClass,"__action ").concat(this.props.baseCssClass,"__action--play ")+(this.state.autoPlay?this.props.baseCssClass+"__action--disabled":""),type:"button","aria-label":this.props.accessibility.play,onClick:()=>this.toggleAutoPlay(!0)},i.a.createElement("span",{className:this.props.baseCssClass+"__action-icon"}),i.a.createElement("span",{className:this.props.baseCssClass+"__action-text"},this.props.accessibility.play))))}}c.defaultProps={_allowedComponentPlaceholderListEmptyLabel:"CarouselV1",isInEditor:!1,autoplay:!1,cqPath:"",cqItems:{},cqItemsOrder:[],accessibilityLabel:"Carousel",accessibility:{play:"Play",pause:"Pause",next:"Next",previous:"Previous",slide:"Slide {0} of {1}",indicator:"Slide %{0}",indicators:"Choose a slide to display"}},e.default=Object(n.b)(Object(n.a)(c),"cmp-carousel")}})}}]);
//# sourceMappingURL=6.7aca4352.chunk.js.map